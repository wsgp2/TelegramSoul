# 🌟 **TELEGRAMSOUL** - Анализатор цифровой души

> Революционная система глубокого анализа Telegram-переписок с использованием ИИ

## 🚨 **КРИТИЧЕСКИЕ ОБНОВЛЕНИЯ v2.1**

### **✅ ИСПРАВЛЕНО 09.06.2025:**
- 🔧 **Универсальная агрегация**: Удалена захардкоженная группировка тем (крипто, путешествия...)
- 📊 **Честные проценты**: Убрано принуждение к 100%, проценты теперь отражают реальную картину
- 🎯 **Семантическая агрегация**: Темы группируются на основе сходства, а не предзаданных паттернов
- 👥 **Универсальность**: Система теперь работает для любых пользователей, не только крипто-энтузиастов
- 📈 **Нормализация для клиентов**: Опциональное приведение процентов для удобства восприятия

## 🎯 **Что это такое?**

**TelegramSoul** - это продвинутая система анализа ваших Telegram-чатов, которая:
- 🔍 **Выявляет истинные интересы** через анализ переписок
- 🧠 **Определяет экспертность** в различных областях
- 💰 **Находит ниши для монетизации** ваших знаний
- 🔮 **Раскрывает психологические паттерны** поведения
- ✨ **Дает ключи трансформации** для личностного роста

---

## 🚀 **Архитектура системы**

### **🎯 ДВУХЭТАПНЫЙ АНАЛИЗ:**

#### **ЭТАП 1: Быстрый анализ тем**
- ⚡ Параллельная обработка с 5 API ключами
- 📊 Выделение 10-15 ключевых тем
- 🎭 Анализ эмоциональной окраски
- 📈 Нормализация процентов

#### **ЭТАП 2: Глубокий Soul Analysis**
- 🏆 Оценка уровня экспертности
- 💡 Анализ коммерческого потенциала
- 🧠 Выявление психологических паттернов
- 🔑 Ключи трансформации

---

## 📋 **Структура проекта**

```
TelegramSoul/
├── 🎯 ОСНОВНЫЕ СКРИПТЫ
│   ├── run_analysis.py              # Быстрый анализ одного чата
│   ├── run_complete_analysis.py     # Полный Soul Analysis
│   ├── chatgpt_analyzer.py          # Ядро системы анализа
│   └── tg_message_collector.py      # Сбор сообщений Telegram
│
├── 📊 ДАННЫЕ И РЕЗУЛЬТАТЫ
│   ├── data/
│   │   ├── messages/                # Исходные сообщения
│   │   ├── reports/                 # Отчеты анализа
│   │   └── visualizations/          # Графики и визуализации
│   └── logs/                        # Логи работы
│
├── ⚙️ КОНФИГУРАЦИЯ
│   ├── credentials.json.example     # Пример API ключей
│   ├── requirements.txt             # Зависимости Python
│   └── .env.example                # Переменные окружения
│
└── 📚 ДОКУМЕНТАЦИЯ
    ├── README.md                    # Этот файл
    └── docs/                        # Дополнительная документация
```

---

## 🛠 **Установка и настройка**

### **1. Клонирование репозитория**
```bash
git clone https://github.com/wsgp2/TelegramSoul.git
cd TelegramSoul
```

### **2. Установка зависимостей**
```bash
pip install -r requirements.txt
```

### **3. Настройка API ключей**
Создайте файл `credentials.json` на основе `credentials.json.example`:
```json
{
  "openai_api_keys": [
    "sk-ваш-первый-ключ",
    "sk-ваш-второй-ключ",
    "sk-ваш-третий-ключ",
    "sk-ваш-четвертый-ключ",
    "sk-ваш-пятый-ключ"
  ]
}
```

### **4. Настройка Telegram API**
Создайте файл `.env` на основе `.env.example`:
```env
API_ID=ваш_api_id
API_HASH=ваш_api_hash
PHONE_NUMBER=ваш_номер_телефона
```

---

## 🚀 **Использование**

### **📱 Сбор сообщений из Telegram**
```bash
python tg_message_collector.py --limit 50000
```

### **⚡ Быстрый анализ одного чата**
```bash
python run_analysis.py data/messages/client_79957860591 --limit 15000
```

### **🌟 Полный Soul Analysis**
```bash
python run_complete_analysis.py data/messages/client_79957860591 --limit 10000
```

---

## 📊 **Результаты анализа**

### **🎯 ОТЧЕТ SOUL ANALYSIS включает:**

#### **📍 УРОВЕНЬ 1: Основные темы и интересы**
- 🔥 Доминирующие темы (25%+)
- ⭐ Основные интересы (15%+) 
- 💡 Заметные темы (8%+)
- 📌 Периодические темы (3%+)
- 🔸 Редкие темы (<3%)

#### **💰 УРОВЕНЬ 2: Экспертность и ниши**
- 🏆 **ЭКСПЕРТ** - готов к монетизации
- 📈 **ПРОДВИНУТЫЙ** - отличные перспективы
- 🌱 **НАЧИНАЮЩИЙ** - требует развития

#### **🧠 УРОВЕНЬ 3: Психологические паттерны**
- 🔮 Архетип личности
- 🔍 Поведенческие паттерны
- 👁️ Слепые зоны
- ✨ Ключи трансформации

---

## 💡 **Примеры использования**

### **🎯 Для личного развития:**
- Понять свои истинные интересы
- Выявить скрытые таланты
- Найти точки роста

### **💰 Для монетизации:**
- Определить экспертные области
- Найти прибыльные ниши
- Получить план монетизации

### **🧠 Для самопознания:**
- Раскрыть психологические паттерны
- Найти блокирующие убеждения
- Получить ключи трансформации

---

## 🎯 **Ключевые особенности**

### **⚡ Высокая производительность**
- Параллельная обработка с 5 API ключами
- Система чекпоинтов для восстановления
- Оптимизированное использование токенов

### **🧠 Умная аналитика**
- Двухэтапная архитектура анализа
- Нормализация и агрегация данных  
- Выявление скрытых паттернов

### **📊 Красивые отчеты**
- Структурированные Soul Reports
- Визуализация интенсивности тем
- Персональные рекомендации

### **🔧 Гибкость настройки**
- Настраиваемые лимиты сообщений
- Фильтрация по датам
- Выбор модели ИИ

---

## 🔍 **Технические детали исправлений**

### **❌ ПРОБЛЕМЫ СТАРОЙ ВЕРСИИ:**
- **Захардкоженная агрегация**: Система принудительно группировала все темы в 5 предустановленных категорий
- **Искусственные проценты**: Промпты требовали точно 100% суммы, что искажало реальные данные
- **Ограниченная применимость**: Работала только для пользователей с интересами к криптовалютам и путешествиям

### **✅ НОВАЯ АРХИТЕКТУРА:**

#### **🎯 Универсальная семантическая агрегация:**
```python
def _aggregate_similar_topics(self, topics):
    # Вычисляет сходство на основе:
    # - Сходства названий (70% веса)
    # - Пересечения ключевых слов (30% веса)
    # Объединяет темы с сходством > 60%
```

#### **📊 Честная система процентов:**
```
СТАРО: "сумма всех процентов = 100%"
НОВО: "реальный процент от объема сообщений"

РЕЗУЛЬТАТ: Проценты могут быть 67.8%, 142.3% и т.д.
```

#### **👥 Нормализация для клиентов:**
```python
def normalize_percentages_for_client(self, topics):
    # Нормализует только при отклонении > 20% от 100%
    # Сохраняет оригинальные данные
    # Помечает нормализованные темы
```

---

## 🛡 **Безопасность и приватность**

- 🔒 Все данные обрабатываются локально
- 🔑 API ключи хранятся в защищенных файлах
- 🚫 Никаких внешних отправок персональных данных
- 🗑️ Возможность полного удаления данных

---

## 🤝 **Вклад в проект**

Мы приветствуем вклад в развитие TelegramSoul! 

1. Fork репозитория
2. Создайте feature branch
3. Сделайте commit изменений
4. Отправьте Pull Request

---

## 📝 **Лицензия**

Этот проект распространяется под лицензией MIT. См. файл `LICENSE` для подробностей.

---

## 🌟 **Создано с любовью**

**TelegramSoul** - это результат глубокого исследования цифрового поведения и применения ИИ для самопознания.

Система использует передовые методы анализа естественного языка и психологические модели для создания уникального портрета вашей цифровой души.

---

## 📞 **Поддержка**

Если у вас есть вопросы или предложения:
- 📧 Email: support@telegramsoul.ai
- 💬 Telegram: @telegramsoul_support
- 🐛 Issues: GitHub Issues

---

**🔮 Откройте тайны своей цифровой души с TelegramSoul!**
